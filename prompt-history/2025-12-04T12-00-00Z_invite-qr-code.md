# QR Code Hover for Invite Buttons

**UTC Timestamp:** 2025-12-04T12:00:00Z
**LLM:** Claude Opus 4.5 (Copilot)

## Prompt

> ensure when user hovers over the invite button a QR code is shown that when scanned by a phone it will link to the invite link of the party the host hovered on.

## Implementation Summary

### Changes Made

1. **Created `src/ui/qrCode.js`** - A lightweight pure JavaScript QR code generator:
   - Implements QR code encoding using byte mode (ISO/IEC 18004:2015)
   - Supports error correction level L (7%)
   - Uses Reed-Solomon error correction with Galois Field operations
   - Provides `generateQRMatrix()`, `renderQRCode()`, and `createQRCodeCanvas()` exports
   - No external dependencies - renders directly to canvas

2. **Updated `src/ui/sidebarMultiplayer.js`**:
   - Imported `createQRCodeCanvas` from the new qrCode module
   - Wrapped invite button in a container div for proper popup positioning
   - Added `mouseenter`/`mouseleave` event handlers to show/hide QR popup
   - Created `showQRCodePopup()` function that:
     - Displays "Generate invite first" if no invite token exists
     - Creates QR code canvas for existing invite URLs
     - Shows "Scan to join" label below QR code
   - Created `hideQRCodePopup()` function to hide the popup

3. **Updated `style.css`** with new styles:
   - `.multiplayer-invite-wrapper` - Relative positioning container
   - `.multiplayer-qr-popup` - Popup styling with white background, shadow, rounded corners
   - `.multiplayer-qr-popup::after` - Arrow pointer towards button
   - `.multiplayer-qr-popup.visible` - Show state with opacity transition
   - `.multiplayer-qr-canvas` - QR code canvas styling
   - `.multiplayer-qr-label` - "Scan to join" text styling
   - `.multiplayer-qr-loading`, `.multiplayer-qr-error` - Status text styling

### How It Works

1. User clicks "Invite" button to generate an invite link
2. Once generated, hovering over the invite button shows a QR code popup
3. The QR code encodes the full invite URL (e.g., `https://game.example.com?invite=token123`)
4. Mobile users can scan the QR code with their phone camera to open the invite link
5. The popup hides when the mouse leaves the button

### Files Modified

- `src/ui/qrCode.js` (new file)
- `src/ui/sidebarMultiplayer.js`
- `style.css`
- `TODO.md`
