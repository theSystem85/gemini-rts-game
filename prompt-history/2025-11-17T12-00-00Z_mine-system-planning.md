2025-11-17T12:00:00Z
LLM: GitHub Copilot (GPT-5.1-Codex Preview)

Follow instructions in [speckit.plan.prompt.md](file:///Users/hella/Documents/projects/gemini-rts-game/.github/prompts/speckit.plan.prompt.md).
I now want to add the mine sweeper and the mine layer unit to the game. So this plannig is about the land mine system of the game. Image assets are already provided in the images subfolders. The mine layer truck faces upwards on the map image. it is 20% slower than the tanker truck. When in deploy mode it is half that fast. It has to stop for every mine when planting it which takes 4s. Every mine will be indicated by a light gray skull icon with 70% transparency on the tile the mine was deployed to. It will be shown as long as the mine is not destroyed. It will fill the occupancy map but only for friendly parties so that friendly units do not drive on them. The mine explodes when any unit (regardless of party) will drive on the tile. The explosion will make 90 damage on the unit/building at the same tile the mine was deployed to. The up, down, left, right neighbour tiles will also make 50 damage. A Mine itself has 10 health. So if a mine is fired at it can be destroyed or damages. If mines are deployed in a row vertically or horizontally without a gap they will explode one after another in a chain reaction as a result to the damage on neighbour tiles automatically. The mine layer truck has a total mine load capacity of 20 mines. Use the same ammo HUD indicator as other units already have but use it for the mines. Ensure its ammo can be refilled by ammo truck or ammo factory. When destroyed make shure the damage of the remaining mines is applied as damage to the direct surrounding tiles (and units/buildings on them) evenly. When the mine layer truck is selected the controls are as follows:
ctrl + left click (force attack) => mine will be deployed at this tile (build a stack of mines to deploy when doing this before the previous mine deploy command was finished, use chain of commands mode and visualisations with the yellow triangles and numbers inside to see the order of mines to be deployed). Ensure the mine after deployment does only get active after the mine layer truck has left its tile so it does not explode when the unit is still on that tile.
left click drag on area => the whole area inside the dragged rectangle will be mined automatically (use same chain of commands mode like before spedified) so that every mine is deployed in a checkerboard pattern that fills the area. ensure the mine layer truck will automatically go back to clothest ammo truck or ammo factory to refill its mines when the mine field could not fully be deplyoed and when refilled then continue with mine field deployment.

The unit costs 1000. Its gas reserve and consuption is the same as the ammo truck. It has 30 health. rotationSpeed: 0.04. The unit can be produced only when a workshop, ammo factory and vehicle factory is build.

Ensure the enemy ai also uses mine layer truck to mine enemy ore fields and the roads towards its base after having build an ammo factory and an ammo truck.

now lets specify the minesweeper tank. This unit is actually a modified tank so it behaves more like one in terms of armor and driving dynamics but it has no rotating turret. So copy all meaningful tank related stats besides the turret mechanics. The unit has like 2x the armor of a normal tank. its max speed is just 70% of a tank when in normal driving mode and 30% of a normal tank when in  minesweeping mode. Ensure there is some dust animation in front of the unit when the sweeping mode is active. When the unit drives over a mine when in sweeping mode the mine explodes and the unit does not take any damage. The sweeper has no ammo just gas tank and consumption. When the unit is selected and the user:
1) left clicks on the map then the unit just drives there normally (non sweeping)
2) left clicks holds key and drags a frame (like AGF mode for tanks) then the entire area that was selected is going to be sweeped by the minesweeper. Then the path planning feature aka PPF will be used to let the unit move back and forth over all the tiles of the selected area that are not occupied (check occupancy map). Ensure to use the yellow markes for marking the corners of the routes the unit should drive to in a straight line. For example in a rectangular area the unit would go from left to right, then up, then right to left then up, then right to left and so on.
3) left clicks while holding strg/control key then the user can draw on the map the entire area that will be sweeped. Mark each tile with an orange overlay that will be sweeped while in draw mode. After the left mouse button is released the entire area will be sweeped and the markers disappear and the user only sees the yellow triange markers from the path planning feature (PPF) that show the straight lines that connect all the tiles of the area to sweep through.

The mine sweeper can be build when a vehicle factory is available and a workshop. It costs 1000.

Ensure the enemy AI also builds minesweeper units and uses them as soon as some of its units got destroyed by a mine.
