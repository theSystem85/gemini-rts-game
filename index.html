<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Code for Battle</title>
  <meta name="description" content="A 2D tile-based Real-Time Strategy game built with vanilla JavaScript">

  <!-- Favicons -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="48x48" href="/favicon-48x48.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
  <link rel="icon" type="image/png" sizes="256x256" href="/favicon-256x256.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/favicon-512x512.png">
  <link rel="manifest" href="/site.webmanifest">

  <!-- Theme color for mobile browsers -->
  <meta name="theme-color" content="#2c3e50">
  <meta name="msapplication-TileColor" content="#2c3e50">
  <meta name="msapplication-config" content="/browserconfig.xml">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">

  <link rel="preload" href="/cursors/default.svg" as="image" type="image/svg+xml">
  <link rel="stylesheet" href="./styles/base.css">
  <link rel="stylesheet" href="./styles/sidebar.css">
  <link rel="stylesheet" href="./cursors.css">
  <link rel="preload" href="./styles/overlays.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="./styles/modals.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="./styles/notificationHistory.css" as="style"
    onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="./styles/overlays.css">
    <link rel="stylesheet" href="./styles/modals.css">
    <link rel="stylesheet" href="./styles/notificationHistory.css">
  </noscript>
  <style>
    .config-modal,
    .notification-history,
    .notification-history-panel {
      display: none;
    }

    .host-paused-banner--hidden,
    .remote-invite-overlay--hidden,
    .mobile-sidebar-modal.hidden,
    .modal-hidden {
      display: none;
    }

    .config-modal.config-modal--open {
      display: flex;
    }

    body.production-buttons-loading .production-button {
      display: none !important;
    }

    /* ...existing styles... */
    .production-button.disabled {
      opacity: 0.5;
      cursor: not-allowed;
      pointer-events: none;
      /* Prevent clicks */
    }

    /* ...existing styles... */
  </style>
</head>

<body class="production-buttons-loading">
  <!-- Host Paused Banner - shown to clients when host pauses the game -->
  <div id="hostPausedBanner" class="host-paused-banner host-paused-banner--hidden" aria-hidden="true" role="alert">
    <div class="host-paused-banner__content">
      <span class="host-paused-banner__icon">‚è∏Ô∏è</span>
      <span class="host-paused-banner__text">Host has paused the game</span>
    </div>
  </div>

  <div id="remoteInviteLanding" class="remote-invite-overlay remote-invite-overlay--hidden" aria-hidden="true"
    role="dialog" aria-modal="true">
    <div class="remote-invite-card">
      <div class="remote-invite-header">
        <div class="remote-invite-header__icon">üéÆ</div>
        <h2>Join Remote Match</h2>
      </div>
      <p class="remote-invite-description">You were invited to control a party. Enter your alias to start the connection
        with the host.</p>
      <div class="remote-invite-token">
        <span class="remote-invite-token__label">Invite token:</span>
        <code id="remoteInviteTokenText" class="remote-invite-token__value">loading...</code>
      </div>
      <form id="remoteInviteForm">
        <label for="remoteAliasInput">Alias</label>
        <input id="remoteAliasInput" name="alias" type="text" autocomplete="off" placeholder="Enter your display name"
          required>
        <div class="remote-invite-buttons">
          <button id="remoteInviteSubmit" type="submit" class="remote-invite-btn remote-invite-btn--primary">Join
            game</button>
          <button id="remoteInviteCancel" type="button"
            class="remote-invite-btn remote-invite-btn--secondary">Cancel</button>
        </div>
      </form>
      <p id="remoteInviteStatus" class="remote-invite-status" aria-live="polite"></p>
    </div>
  </div>
  <div id="mobileSidebarControls" aria-hidden="true">
    <button id="sidebarToggle" type="button" class="sidebar-toggle" aria-controls="sidebar" aria-expanded="true"
      aria-label="Collapse sidebar">
      <span class="sidebar-toggle-icon">‚ò∞</span>
    </button>
    <div id="mobileActionsContainer"></div>
  </div>

  <div id="mobileMinimapOverlay" aria-hidden="true"></div>

  <div id="mobileJoystickContainer" aria-hidden="true">
    <div class="mobile-joystick" data-joystick="left">
      <div class="joystick-base">
        <div class="joystick-thumb"></div>
      </div>
    </div>
    <div class="mobile-joystick" data-joystick="right">
      <div class="joystick-base">
        <div class="joystick-thumb"></div>
      </div>
    </div>
  </div>

  <div id="sidebar">
    <canvas id="minimap"></canvas>

    <!-- Money bar positioned right above the energy bar -->
    <div id="moneyBarContainer"></div>

    <!-- Energy bar positioned right above the minimap -->
    <div id="energyBarContainer"></div>

    <div id="sidebarUtilityButtons" aria-hidden="true"></div>

    <div id="actions">
      <button id="mobileSidebarMenuBtn" class="action-button icon-button mobile-sidebar-menu-button" title="Open menu"
        aria-expanded="false" aria-controls="mobileSidebarModal" type="button">
        <span class="button-icon settings-icon">‚ò∞</span>
      </button>
      <button id="repairBtn" class="action-button icon-button" title="Repair">
        <img src="/icons/wrench.svg" alt="Repair" class="button-icon white-icon">
      </button>
      <button id="sellBtn" class="action-button icon-button" title="Sell for 70% of the build price">
        <span class="button-icon">$</span>
      </button>
      <button id="controlGroupsBtn" class="action-button icon-button" title="Control groups" type="button"
        aria-expanded="false" aria-controls="mobileControlGroupsPanel" aria-haspopup="dialog">
        <span class="button-icon group-icon">1¬∑2¬∑3</span>
      </button>
      <button id="pauseBtn" class="action-button icon-button" title="Start/Pause Game">
        <span class="button-icon play-pause-icon">‚ñ∂</span>
      </button>
      <button id="restartBtn" class="action-button icon-button" title="Restart Game">
        <span class="button-icon restart-icon">‚Üª</span>
      </button>
      <button id="musicControl" class="action-button icon-button" title="Toggle Music">
        <span class="button-icon music-icon">‚ô™</span>
      </button>
      <button id="mobileMinimapButton" class="action-button icon-button" type="button"
        title="Show minimap while pressed" aria-label="Show minimap while pressed">
        <span class="button-icon minimap-icon" aria-hidden="true"></span>
      </button>
    </div>

    <!-- Master Volume Control -->
    <div id="volumeControl">
      <label style="display: flex; align-items: center; margin-bottom: 5px;">
        Volume:
        <input type="range" class="volume-slider" id="masterVolumeSlider" min="0" max="100" value="50"
          style="margin-left: 10px; flex: 1;">
        <span id="volumeValue" class="volume-value">50%</span>
      </label>
    </div>

    <div id="sidebarScroll">

      <div id="productionArea">
        <div id="productionTabs">
          <button class="tab-button" data-tab="units">Units</button>
          <button class="tab-button active" data-tab="buildings">Buildings</button>
          <button id="mobileCategoryToggle" class="tab-toggle-button" type="button" aria-pressed="false"
            aria-label="Switch to Units build options">
            Buildings
          </button>
        </div>

        <div id="production">
          <div id="productionContainer">
            <div id="productionTabContent">
              <div id="unitsTabContent" class="tab-content">
                <button class="production-button" data-unit-type="tank">
                  <img src="images/sidebar/placeholder.webp" data-src="images/sidebar/tank.webp" alt="Tank V1"
                    loading="lazy">
                  <span class="unit-name">Tank V1</span>
                  <span class="unit-cost"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-unit-type="tank-v2">
                  <img src="images/sidebar/placeholder.webp" data-src="images/sidebar/tank_v2.webp" alt="Tank V2"
                    loading="lazy">
                  <span class="unit-name">Tank V2</span>
                  <span class="unit-cost"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-unit-type="tank-v3">
                  <img src="images/sidebar/placeholder.webp" data-src="images/sidebar/tank_v3.webp" alt="Tank V3"
                    loading="lazy">
                  <span class="unit-name">Tank V3</span>
                  <span class="unit-cost"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-unit-type="rocketTank">
                  <img src="images/sidebar/placeholder.webp" data-src="images/sidebar/rocket_tank.webp"
                    alt="Rocket Tank" loading="lazy">
                  <span class="unit-name">Rocket Tank</span>
                  <span class="unit-cost"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-unit-type="apache">
                  <img src="images/sidebar/placeholder.webp" data-src="images/sidebar/apache_sidebar.webp" alt="Apache"
                    loading="lazy">
                  <span class="unit-name">Apache</span>
                  <span class="unit-cost"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-unit-type="howitzer">
                  <img src="images/sidebar/placeholder.webp" data-src="images/sidebar/howitzer_sidebar.webp"
                    alt="Howitzer" loading="lazy">
                  <span class="unit-name">Howitzer</span>
                  <span class="unit-cost"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-unit-type="recoveryTank">
                  <img src="images/sidebar/placeholder.webp" data-src="images/sidebar/recovery_tank.webp"
                    alt="Recovery Tank" loading="lazy">
                  <span class="unit-name">Recovery Tank</span>
                  <span class="unit-cost"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-unit-type="harvester">
                  <img src="images/sidebar/placeholder.webp" data-src="images/sidebar/harvester.webp" alt="Harvester"
                    loading="lazy">
                  <span class="unit-name">Harvester</span>
                  <span class="unit-cost"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-unit-type="ambulance">
                  <img src="images/sidebar/placeholder.webp" data-src="images/sidebar/ambulance.webp" alt="Ambulance"
                    loading="lazy">
                  <span class="unit-name">Ambulance</span>
                  <span class="unit-cost"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-unit-type="tankerTruck">
                  <img src="images/sidebar/placeholder.webp" data-src="images/sidebar/tanker_truck.webp"
                    alt="Tanker Truck" loading="lazy">
                  <span class="unit-name">Tanker Truck</span>
                  <span class="unit-cost"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-unit-type="ammunitionTruck">
                  <img src="images/sidebar/placeholder.webp" data-src="images/sidebar/ammunition_truck_sidebar.webp"
                    alt="Ammunition Truck" loading="lazy">
                  <span class="unit-name">Ammunition Truck</span>
                  <span class="unit-cost"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-unit-type="mineLayer">
                  <img src="images/sidebar/placeholder.webp" data-src="images/sidebar/mine_layer_sidebar.webp"
                    alt="Mine Layer" loading="lazy">
                  <span class="unit-name">Mine Layer</span>
                  <span class="unit-cost"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-unit-type="mineSweeper">
                  <img src="images/sidebar/placeholder.webp" data-src="images/sidebar/mine_sweeper_sidebar.webp"
                    alt="Mine Sweeper" loading="lazy">
                  <span class="unit-name">Mine Sweeper</span>
                  <span class="unit-cost"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
              </div>
              <div id="buildingsTabContent" class="tab-content active">
                <button class="production-button" data-building-type="powerPlant">
                  <img draggable="true" src="images/sidebar/placeholder.webp" data-src="images/sidebar/power_plant.webp"
                    alt="Power Plant" loading="lazy">
                  <span class="building-name">Power Plant</span>
                  <span class="building-cost"></span>
                  <span class="building-power"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-building-type="oreRefinery">
                  <img draggable="true" src="images/sidebar/placeholder.webp"
                    data-src="images/sidebar/ore_refinery.webp" alt="Ore Refinery" loading="lazy">
                  <span class="building-name">Ore Refinery</span>
                  <span class="building-cost"></span>
                  <span class="building-power"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-building-type="vehicleFactory">
                  <img draggable="true" src="images/sidebar/placeholder.webp"
                    data-src="images/sidebar/vehicle_factory.webp" alt="Vehicle Factory" loading="lazy">
                  <span class="building-name">Vehicle Factory</span>
                  <span class="building-cost"></span>
                  <span class="building-power"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-building-type="radarStation">
                  <img draggable="true" src="images/sidebar/placeholder.webp"
                    data-src="images/sidebar/radar_station.webp" alt="Radar Station" loading="lazy">
                  <span class="building-name">Radar Station</span>
                  <span class="building-cost"></span>
                  <span class="building-power"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-building-type="gasStation">
                  <img draggable="true" src="images/sidebar/placeholder.webp" data-src="images/sidebar/gas_station.webp"
                    alt="Gas Station" loading="lazy">
                  <span class="building-name">Gas Station</span>
                  <span class="building-cost"></span>
                  <span class="building-power"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-building-type="vehicleWorkshop">
                  <img draggable="true" src="images/sidebar/placeholder.webp"
                    data-src="images/sidebar/vehicle_workshop.webp" alt="Vehicle Workshop" loading="lazy">
                  <span class="building-name">Vehicle Workshop</span>
                  <span class="building-cost"></span>
                  <span class="building-power"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-building-type="ammunitionFactory">
                  <img draggable="true" src="images/sidebar/placeholder.webp"
                    data-src="images/sidebar/ammunition_factory_sidebar.webp" alt="Ammunition Factory" loading="lazy">
                  <span class="building-name">Ammunition Factory</span>
                  <span class="building-cost"></span>
                  <span class="building-power"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-building-type="hospital">
                  <img draggable="true" src="images/sidebar/placeholder.webp" data-src="images/sidebar/hospital.webp"
                    alt="Hospital" loading="lazy">
                  <span class="building-name">Hospital</span>
                  <span class="building-cost"></span>
                  <span class="building-power"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-building-type="helipad">
                  <img draggable="true" src="images/sidebar/placeholder.webp"
                    data-src="images/sidebar/helipad_sidebar.webp" alt="Helipad" loading="lazy">
                  <span class="building-name">Helipad</span>
                  <span class="building-cost"></span>
                  <span class="building-power"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-building-type="turretGunV1">
                  <img draggable="true" src="images/sidebar/placeholder.webp"
                    data-src="images/sidebar/turret_gun_v1.webp" alt="Turret Gun V1" loading="lazy">
                  <span class="building-name">Turret Gun V1</span>
                  <span class="building-cost"></span>
                  <span class="building-power"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-building-type="turretGunV2">
                  <img draggable="true" src="images/sidebar/placeholder.webp"
                    data-src="images/sidebar/turret_gun_v2.webp" alt="Turret Gun V2" loading="lazy">
                  <span class="building-name">Turret Gun V2</span>
                  <span class="building-cost"></span>
                  <span class="building-power"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-building-type="turretGunV3">
                  <img draggable="true" src="images/sidebar/placeholder.webp"
                    data-src="images/sidebar/turret_gun_v3.webp" alt="Turret Gun V3" loading="lazy">
                  <span class="building-name">Turret Gun V3</span>
                  <span class="building-cost"></span>
                  <span class="building-power"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-building-type="rocketTurret">
                  <img draggable="true" src="images/sidebar/placeholder.webp"
                    data-src="images/sidebar/rocket_turret.webp" alt="Rocket Turret" loading="lazy">
                  <span class="building-name">Rocket Turret</span>
                  <span class="building-cost"></span>
                  <span class="building-power"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-building-type="teslaCoil">
                  <img draggable="true" src="images/sidebar/placeholder.webp" data-src="images/sidebar/tesla_coil.webp"
                    alt="Tesla Coil" loading="lazy">
                  <span class="building-name">Tesla Coil</span>
                  <span class="building-cost"></span>
                  <span class="building-power"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-building-type="artilleryTurret">
                  <img draggable="true" src="images/sidebar/placeholder.webp"
                    data-src="images/sidebar/artillery_turret.webp" alt="Artillery Turret" loading="lazy">
                  <span class="building-name">Artillery Turret</span>
                  <span class="building-cost"></span>
                  <span class="building-power"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-building-type="concreteWall">
                  <img draggable="true" src="images/sidebar/placeholder.webp"
                    data-src="images/sidebar/concrete_wall.webp" alt="Concrete Wall" loading="lazy">
                  <span class="building-name">Concrete Wall</span>
                  <span class="building-cost"></span>
                  <span class="building-power"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
                <button class="production-button" data-building-type="constructionYard">
                  <img draggable="true" src="images/sidebar/placeholder.webp"
                    data-src="images/sidebar/construction_yard.webp" alt="Construction Yard" loading="lazy">
                  <span class="building-name">Construction Yard</span>
                  <span class="building-cost"></span>
                  <span class="building-power"></span>
                  <div class="production-progress"></div>
                  <div class="batch-counter" style="display:none">0</div>
                  <div class="new-label" style="display:none">NEW</div>
                </button>
              </div>
            </div>
          </div>
        </div>
        <div id="productionProgress"></div>
      </div>

      <!-- Save/Load Game Menu -->
      <div id="saveLoadMenu">
        <h3>Save/Load Game</h3>
        <div style="display: flex; align-items: center; gap: 5px;">
          <input id="saveLabelInput" class="sidebar-input" type="text" placeholder="Save label" maxlength="32">
          <button id="saveGameBtn" class="action-button icon-button" title="Save Game">
            <img src="/icons/save.svg" alt="Save" class="button-icon white-icon">
          </button>
        </div>
        <ul id="saveGamesList" style="max-height: 120px; overflow-y: auto; margin: 8px 0 0 0; list-style: none;"></ul>
      </div>

      <!-- Multiplayer Settings -->
      <div style="display: flex; gap: 5px; margin: 10px 0;">
        <button id="mapSettingsBtn" class="action-button icon-button" title="Map Settings">
          <span class="button-icon settings-icon">‚öô</span>
        </button>
        <button id="userDocsBtn" class="action-button icon-button" type="button" title="Open user documentation">
          <span class="button-icon">üìò</span>
        </button>
        <button id="cheatMenuBtn" class="action-button icon-button" type="button" title="Open cheat console">
          <span class="button-icon">üÉè</span>
        </button>
        <button id="helpBtn" class="action-button icon-button" type="button" title="Show game controls help">
          <span class="button-icon">‚ÑπÔ∏è</span>
        </button>
        <button id="performanceWidgetBtn" class="action-button icon-button" type="button"
          title="Toggle FPS overlay" aria-label="Toggle FPS overlay">
          <span class="button-icon">üìä</span>
        </button>
      </div>

      <div id="multiplayerSettings">
        <h3>Multiplayer</h3>
        <div id="multiplayerPartyList" class="multiplayer-party-list" aria-live="polite"></div>
        <div class="multiplayer-join-section">
          <label class="multiplayer-join-label">Join via invite link:</label>
          <div class="multiplayer-join-input-row">
            <input type="text" id="inviteLinkInput" class="sidebar-input multiplayer-join-input"
              placeholder="Paste invite link" autocomplete="off">
            <button type="button" id="joinInviteLinkBtn"
              class="multiplayer-invite-button multiplayer-join-btn">Join</button>
            <button type="button" id="scanQrBtn" class="multiplayer-invite-button multiplayer-scan-btn"
              title="Scan QR code" aria-label="Scan QR code">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="7" height="7" />
                <rect x="14" y="3" width="7" height="7" />
                <rect x="3" y="14" width="7" height="7" />
                <rect x="14" y="14" width="3" height="3" />
                <line x1="21" y1="14" x2="21" y2="21" />
                <line x1="14" y1="21" x2="21" y2="21" />
              </svg>
            </button>
          </div>
          <span id="joinInviteLinkStatus" class="multiplayer-join-status"></span>
        </div>
      </div>

      <!-- Stats and game speed moved to the bottom -->
      <div id="stats">
        <p>Time: <span id="gameTime">0</span></p>
        <p>Wins: <span id="wins">0</span></p>
        <p>Losses: <span id="losses">0</span></p>

        <!-- Game speed control added here at the bottom -->
        <div id="speedControl">
          <label style="display: flex; align-items: center; margin: 10px 0;">
            Game Speed:
            <input type="number" class="sidebar-input" min="0.25" max="4" step="0.25" value="1"
              style="width: 70px; margin-left: 10px;" id="speedMultiplier">
          </label>
        </div>

        <!-- Map Settings Accordion -->
        <div id="mapSettingsAccordion" style="margin: 10px 0;">
          <button id="mapSettingsToggle" class="action-button"
            style="width: 100%; text-align: left; display: flex; justify-content: space-between; align-items: center;"
            aria-expanded="false" aria-controls="mapSettingsContent">
            <span>Map Settings</span>
            <span id="mapSettingsToggleIcon">‚ñº</span>
          </button>
          <div id="mapSettingsContent" style="display: none; margin-top: 10px;">
            <div class="map-edit-controls" style="display: flex; flex-direction: column; gap: 6px; margin: 10px 0;">
              <button id="mapEditModeBtn" class="action-button" type="button">Edit Mode</button>
            </div>
            <button id="shuffleMapBtn" class="action-button" style="width: 100%; margin: 10px 0;">Shuffle Map</button>
            <label style="display: flex; align-items: center; margin: 10px 0;">
              Seed:
              <input type="number" class="sidebar-input" id="mapSeed" value="1" style="width: 70px; margin-left: 10px;">
            </label>
            <label style="display: flex; align-items: center; margin: 10px 0;">
              Players:
              <input type="number" class="sidebar-input" id="playerCount" min="2" max="4" value="2"
                style="width: 70px; margin-left: 10px;">
            </label>
            <label style="display: flex; align-items: center; margin: 10px 0;">
              Your alias:
              <input type="text" class="sidebar-input" id="playerAliasInput" placeholder="Enter alias"
                autocomplete="off" style="width: 120px; margin-left: 10px;">
            </label>
            <div style="display: flex; flex-direction: column; gap: 10px; margin: 10px 0;">
              <label style="display: flex; align-items: center; justify-content: space-between; gap: 5px;">
                Width:
                <input type="number" class="sidebar-input" id="mapWidthTiles" min="32" value="100" style="width: 70px;">
              </label>
              <label style="display: flex; align-items: center; justify-content: space-between; gap: 5px;">
                Height:
                <input type="number" class="sidebar-input" id="mapHeightTiles" min="32" value="100"
                  style="width: 70px;">
              </label>
            </div>
            <div class="map-edit-controls" style="display: flex; flex-direction: column; gap: 6px; margin: 10px 0;">
              <label style="display:flex; align-items:center; gap:6px;">
                Tile:
                <select id="mapEditTileSelect" class="sidebar-input" style="flex:1;">
                  <option value="grass">Grass</option>
                  <option value="decor">Decoration</option>
                  <option value="rugged">Rugged Grass</option>
                  <option value="street">Street</option>
                  <option value="rock">Rock</option>
                  <option value="water">Water</option>
                  <option value="ore">Ore</option>
                </select>
              </label>
              <label style="display:flex; align-items:center; gap:6px;">
                <input type="checkbox" id="mapEditRandomToggle" checked>
                <span>Random variations</span>
              </label>
              <div id="mapEditStatus" class="map-edit-status" aria-live="polite" style="font-size: 12px; color: #ccc;">
              </div>
            </div>
            <label style="display:flex; align-items:center; gap:5px; margin: 10px 0;">
              <input type="checkbox" id="oreSpreadCheckbox">
              <span>ORE_SPREAD_ENABLED</span>
            </label>
            <label style="display:flex; align-items:center; gap:5px; margin: 10px 0;">
              <input type="checkbox" id="shadowOfWarCheckbox">
              <span>Shadow of War</span>
            </label>
            <label id="showEnemyResourcesLabel" style="display:flex; align-items:center; gap:5px; margin: 10px 0;">
              <input type="checkbox" id="showEnemyResourcesCheckbox">
              <span>Show Enemy Resources</span>
            </label>
          </div>
        </div>

        <div id="sidebarFooterVersion" class="sidebar-version">
          <div class="sidebar-version__row">
            <span class="sidebar-version__label">Version:</span>
            <span id="appVersion">-</span>
          </div>
          <div id="appCommitInfo" class="sidebar-version__commit">
            <span id="appCommitMessage"></span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="mobilePortraitHud" aria-hidden="true">
    <div id="mobilePortraitMinimapDock"></div>
    <div id="mobilePortraitActions">
      <div id="mobilePortraitActionsLeft"></div>
      <button id="mobileSidebarExpandBtn" class="action-button icon-button" type="button" aria-label="Expand sidebar"
        title="Expand sidebar">
        <span class="button-icon">‚ò∞</span>
      </button>
    </div>
  </div>

  <div id="mobileControlGroupsPanel" class="mobile-control-groups" aria-hidden="true" role="dialog"
    aria-label="Control groups">
    <div class="mobile-control-groups__header">
      <span>Unit Groups</span>
      <button id="mobileControlGroupsAssignToggle" class="mobile-control-groups__assign" type="button"
        aria-pressed="false">Assign</button>
    </div>
    <p class="mobile-control-groups__hint">Tap a number to select. Hold to assign.</p>
    <div class="mobile-control-groups__grid" role="group" aria-label="Control group buttons">
      <button class="mobile-control-groups__button" type="button" data-group="1">1</button>
      <button class="mobile-control-groups__button" type="button" data-group="2">2</button>
      <button class="mobile-control-groups__button" type="button" data-group="3">3</button>
      <button class="mobile-control-groups__button" type="button" data-group="4">4</button>
      <button class="mobile-control-groups__button" type="button" data-group="5">5</button>
      <button class="mobile-control-groups__button" type="button" data-group="6">6</button>
      <button class="mobile-control-groups__button" type="button" data-group="7">7</button>
      <button class="mobile-control-groups__button" type="button" data-group="8">8</button>
      <button class="mobile-control-groups__button" type="button" data-group="9">9</button>
    </div>
  </div>

  <div id="mobileBuildMenuContainer" aria-hidden="true"></div>
  <canvas id="gameCanvasGL" aria-hidden="true"></canvas>
  <canvas id="gameCanvas"></canvas>

  <!-- FPS Display Overlay -->
  <div id="fpsDisplay" class="fps-overlay">
    <div id="fpsValue">FPS: --</div>
    <div id="frameTimeValue">Frame: -- ms</div>
    <div id="frameTimeMin">Min: -- ms</div>
    <div id="frameTimeMax">Max: -- ms</div>
    <div id="fpsLlmTokens">Tokens: 0</div>
    <div id="fpsLlmSpend">Spend: $0.0000</div>
    <div id="networkStatsContainer" style="display: none;">
      <div style="border-top: 1px solid rgba(255,255,255,0.3); margin: 4px 0;"></div>
      <div id="networkSendRate">‚Üë 0 B/s</div>
      <div id="networkRecvRate">‚Üì 0 B/s</div>
      <div id="networkTotalSent">Sent: 0 KB</div>
      <div id="networkTotalRecv">Recv: 0 KB</div>
    </div>
    <div id="lockstepStatsContainer" style="display: none;">
      <div style="border-top: 1px solid rgba(255,255,255,0.3); margin: 4px 0;"></div>
      <div id="lockstepStatus">‚öô Lockstep: --</div>
      <div id="lockstepTick">Tick: 0</div>
      <div id="lockstepDesync" style="display: none; color: #ff6b6b;">‚ö† Desync!</div>
    </div>
  </div>
  <div id="benchmarkCountdown" class="benchmark-countdown" hidden aria-live="polite">
    <span id="benchmarkCountdownText"></span>
  </div>
  <div id="performanceDialog" class="performance-dialog"></div>

  <div id="configSettingsModal" class="config-modal" aria-hidden="true">
    <div class="config-modal__dialog" role="dialog" aria-modal="true" aria-labelledby="configModalTitle">
      <div class="config-modal__header">
        <div class="config-modal__title-group">
          <h2 id="configModalTitle">Settings</h2>
          <div class="config-modal__tabs" role="tablist">
            <button class="config-modal__tab config-modal__tab--active" data-config-tab="runtime" role="tab"
              aria-selected="true">Runtime Config</button>
            <button class="config-modal__tab" data-config-tab="keybindings" role="tab" aria-selected="false">Key
              Bindings</button>
          </div>
        </div>
        <button id="configModalCloseBtn" class="config-modal__close" aria-label="Close settings">√ó</button>
      </div>
      <div class="config-modal__body">
        <div class="config-modal__content config-modal__content--active" data-config-tab-panel="runtime">
          <p class="config-modal__hint">
            Runtime configuration editing still uses the advanced dialog. Open it to tweak live values without
            restarting the match.
          </p>
          <div class="config-modal__actions">
            <button id="openRuntimeConfigDialogBtn" class="config-modal__button config-modal__button--primary"
              type="button">Open Runtime Config Dialog</button>
            <button id="runBenchmarkBtn" class="config-modal__button" type="button">Run Performance Benchmark</button>
          </div>
          <label class="config-modal__checkbox-row" for="settingsFrameLimiterToggle">
            <input id="settingsFrameLimiterToggle" type="checkbox" checked>
            Frame limiter (cap render loop to display refresh rate)
          </label>
          <label class="config-modal__checkbox-row" for="settingsRadarOfflineAnimationToggle">
            <input id="settingsRadarOfflineAnimationToggle" type="checkbox" checked>
            Animate minimap radar-offline grain (old TV white-snow flicker)
          </label>
          <div class="config-modal__section">
            <h3 class="config-modal__section-title">Tutorial</h3>
            <label class="config-modal__field config-modal__field--toggle">
              <input type="checkbox" id="tutorialShowOnStartup">
              <span>Show tutorial on startup</span>
            </label>
            <label class="config-modal__field config-modal__field--toggle">
              <input type="checkbox" id="tutorialSpeechEnabled">
              <span>Enable tutorial voice</span>
            </label>
            <label class="config-modal__field">
              <span>Tutorial voice:</span>
              <select id="tutorialVoiceSelect" class="config-modal__select">
                <option value="">Default</option>
              </select>
            </label>
            <div class="config-modal__actions">
              <button id="tutorialStartBtn" class="config-modal__button" type="button">Start Tutorial</button>
              <button id="tutorialRestartBtn" class="config-modal__button" type="button">Restart Tutorial</button>
            </div>
          </div>
          <div class="config-modal__section">
            <h3 class="config-modal__section-title">Controls</h3>
            <label class="config-modal__field config-modal__field--toggle">
              <input type="checkbox" id="desktopEdgeAutoscrollToggle">
              <span>Enable desktop edge auto-scroll</span>
            </label>
            <div class="config-modal__hud-settings-row">
              <div class="config-modal__hud-settings-controls">
                <label class="config-modal__field">
                  <span>Unit selection HUD style:</span>
                  <select id="selectionHudModeSelect" class="config-modal__select">
                    <option value="legacy">Classic (pre-refactor)</option>
                    <option value="modern">Modern (outlined)</option>
                    <option value="modern-no-border">Modern (corner crew, no border)</option>
                    <option value="modern-donut">Modern (donut arcs + edge crew)</option>
                  </select>
                </label>
                <label class="config-modal__field">
                  <span>HUD bar thickness (px):</span>
                  <input type="number" id="selectionHudBarThicknessInput" min="1" max="8" step="1" value="4">
                </label>
              </div>
              <div class="config-modal__hud-preview-wrap" aria-label="Selected tank HUD preview">
                <canvas id="selectionHudPreviewCanvas" width="180" height="120"></canvas>
              </div>
            </div>
          </div>
          <div class="config-modal__section">
            <h3 class="config-modal__section-title">LLM Strategic AI</h3>
            <label class="config-modal__field config-modal__field--toggle">
              <input type="checkbox" id="llmStrategicEnabled">
              <span>Enable LLM strategic planning for enemy AI</span>
            </label>
            <label class="config-modal__field">
              <span>Strategic tick interval (seconds):</span>
              <input type="number" id="llmStrategicInterval" min="5" max="300" step="5">
            </label>
            <label class="config-modal__field">
              <span>Strategic provider:</span>
              <select id="llmStrategicProvider" class="config-modal__select"></select>
            </label>
            <label class="config-modal__field">
              <span>Strategic verbosity:</span>
              <select id="llmStrategicVerbosity" class="config-modal__select">
                <option value="minimal">Minimal</option>
                <option value="normal">Normal</option>
                <option value="full">Full</option>
              </select>
            </label>
            <label class="config-modal__field config-modal__field--toggle">
              <input type="checkbox" id="llmCommentaryEnabled">
              <span>Enable mean enemy commentary (LLM)</span>
            </label>
            <label class="config-modal__field">
              <span>Commentary provider:</span>
              <select id="llmCommentaryProvider" class="config-modal__select"></select>
            </label>
            <label class="config-modal__field">
              <span>Commentary prompt override:</span>
              <textarea id="llmCommentaryPrompt" rows="3" placeholder="Leave blank for default taunt prompt"></textarea>
            </label>
            <label class="config-modal__field config-modal__field--toggle">
              <input type="checkbox" id="llmCommentaryTts">
              <span>Read enemy commentary aloud</span>
            </label>
            <label class="config-modal__field">
              <span>Commentary voice:</span>
              <select id="llmCommentaryVoice" class="config-modal__select">
                <option value="">Default</option>
              </select>
            </label>
            <div class="config-modal__note">
              Strategic LLM decisions supersede the default AI. Local AI controls micro between LLM ticks.
            </div>
          </div>
          <div class="config-modal__section">
            <h3 class="config-modal__section-title">LLM Providers</h3>
            <div class="config-modal__subsection">
              <h4 class="config-modal__section-title">OpenAI</h4>
              <div class="config-modal__api-key-security" id="llmApiKeySecurity-openai">
                <label class="config-modal__field">
                  <span>API key:</span>
                  <input type="password" id="llmApiKey-openai" autocomplete="off" placeholder="sk-..." aria-describedby="llmApiKeySecurityNote-openai">
                </label>
                <div class="config-modal__api-key-security-note" id="llmApiKeySecurityNote-openai" role="note" aria-live="polite">
                  <strong>Security-critical: read before entering a key.</strong>
                  <ul>
                    <li>Use a <strong>dedicated OpenAI API key</strong> created only for this game. Required permissions are: read model list (<code>GET /v1/models</code>) and create responses (<code>POST /v1/responses</code>) only.</li>
                    <li>Set strict spending controls (low monthly budget + usage alerts) and rotate/revoke the key immediately if you suspect exposure.</li>
                    <li>The key is used only in your browser to request strategic AI plans and commentary for this game session. No server-side relay is used by this app.</li>
                    <li>Use a low-cost model when possible (for example OpenAI nano-class models) to reduce token spend.</li>
                    <li>This app stores the key in browser <code>localStorage</code> only (not on our servers). Local storage can be exposed by browser/device compromise or XSS, so treat this as sensitive.</li>
                    <li>Entering a key is optional. You can play the game fully without LLM features.</li>
                    <li><a href="https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety" target="_blank" rel="noopener noreferrer">OpenAI official API key safety best practices</a>.</li>
                  </ul>
                  <label class="config-modal__field config-modal__field--toggle config-modal__field--compact">
                    <input type="checkbox" id="llmApiKeyRiskConfirm-openai">
                    <span>I understand the risks and choose to enter a key at my own risk.</span>
                  </label>
                </div>
              </div>
              <label class="config-modal__field">
                <span>Base URL:</span>
                <input type="text" id="llmBaseUrl-openai" placeholder="https://api.openai.com/v1">
              </label>
              <label class="config-modal__field">
                <span>Model:</span>
                <select id="llmModel-openai" class="config-modal__select"></select>
              </label>
              <button class="config-modal__button" id="llmRefresh-openai" type="button">Refresh OpenAI models</button>
            </div>
            <details class="config-modal__subsection config-modal__subsection--locked">
              <summary class="config-modal__subsection-summary">
                <h4 class="config-modal__section-title">Anthropic</h4>
                <span class="config-modal__hint">coming soon!</span>
              </summary>
              <div class="config-modal__locked-content">
                <label class="config-modal__field">
                  <span>API key:</span>
                  <input type="password" id="llmApiKey-anthropic" autocomplete="off" placeholder="sk-ant-..." disabled>
                </label>
                <label class="config-modal__field">
                  <span>Base URL:</span>
                  <input type="text" id="llmBaseUrl-anthropic" placeholder="https://api.anthropic.com" disabled>
                </label>
                <label class="config-modal__field">
                  <span>Model:</span>
                  <select id="llmModel-anthropic" class="config-modal__select" disabled></select>
                </label>
                <button class="config-modal__button" id="llmRefresh-anthropic" type="button" disabled>Refresh Anthropic
                  models</button>
                <div class="config-modal__note">Anthropic provider settings are coming soon!</div>
              </div>
            </details>
            <details class="config-modal__subsection config-modal__subsection--locked">
              <summary class="config-modal__subsection-summary">
                <h4 class="config-modal__section-title">xAI</h4>
                <span class="config-modal__hint">coming soon!</span>
              </summary>
              <div class="config-modal__locked-content">
                <label class="config-modal__field">
                  <span>API key:</span>
                  <input type="password" id="llmApiKey-xai" autocomplete="off" placeholder="xai-..." disabled>
                </label>
                <label class="config-modal__field">
                  <span>Base URL:</span>
                  <input type="text" id="llmBaseUrl-xai" placeholder="https://api.x.ai/v1" disabled>
                </label>
                <label class="config-modal__field">
                  <span>Model:</span>
                  <select id="llmModel-xai" class="config-modal__select" disabled></select>
                </label>
                <button class="config-modal__button" id="llmRefresh-xai" type="button" disabled>Refresh xAI models</button>
                <div class="config-modal__note">xAI provider settings are coming soon!</div>
              </div>
            </details>
            <details class="config-modal__subsection config-modal__subsection--locked">
              <summary class="config-modal__subsection-summary">
                <h4 class="config-modal__section-title">Ollama</h4>
                <span class="config-modal__hint">coming soon!</span>
              </summary>
              <div class="config-modal__locked-content">
                <label class="config-modal__field">
                  <span>Base URL:</span>
                  <input type="text" id="llmBaseUrl-ollama" placeholder="http://localhost:11434" disabled>
                </label>
                <label class="config-modal__field">
                  <span>Model:</span>
                  <select id="llmModel-ollama" class="config-modal__select" disabled></select>
                </label>
                <button class="config-modal__button" id="llmRefresh-ollama" type="button" disabled>Refresh Ollama models</button>
                <div class="config-modal__note">Ollama provider settings are coming soon!</div>
              </div>
            </details>
          </div>
        </div>
        <div class="config-modal__content" data-config-tab-panel="keybindings" hidden>
          <div class="keybinding-toolbar">
            <div>
              <button id="keybindingsExportBtn" class="config-modal__button" type="button">Export as JSON</button>
              <button id="keybindingsImportBtn" class="config-modal__button" type="button">Import JSON</button>
              <input id="keybindingsImportInput" type="file" accept="application/json" style="display:none" />
            </div>
            <div id="keybindingsMessage" class="config-modal__message" aria-live="polite"></div>
          </div>
          <div id="keybindingsEditor"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Kicked from session modal -->
  <div id="kickedModal" class="kicked-modal" aria-hidden="true">
    <div class="kicked-modal__dialog" role="dialog" aria-modal="true" aria-labelledby="kickedModalTitle">
      <div class="kicked-modal__header">
        <h2 id="kickedModalTitle">Disconnected from Game</h2>
      </div>
      <div class="kicked-modal__body">
        <p id="kickedModalMessage" class="kicked-modal__message">You were kicked from the session by the host.</p>
        <p class="kicked-modal__info">You can continue playing locally with AI opponents, or start a fresh game.</p>
        <div class="kicked-modal__actions">
          <button id="kickedContinueBtn" class="kicked-modal__button kicked-modal__button--primary" type="button">
            Continue with AI
          </button>
          <button id="kickedNewGameBtn" class="kicked-modal__button kicked-modal__button--secondary" type="button">
            Start New Game
          </button>
        </div>
      </div>
    </div>
  </div>

  <div id="benchmarkModal" class="benchmark-modal modal-hidden" aria-hidden="true">
    <div class="benchmark-modal__dialog" role="dialog" aria-modal="true" aria-labelledby="benchmarkModalTitle">
      <div class="benchmark-modal__header">
        <h2 id="benchmarkModalTitle">Performance Benchmark</h2>
        <button id="benchmarkModalCloseBtn" class="benchmark-modal__close"
          aria-label="Close benchmark results">√ó</button>
      </div>
      <div class="benchmark-modal__body">
        <p id="benchmarkModalStatus">Preparing benchmark‚Ä¶</p>
        <div id="benchmarkResultsContainer" hidden>
          <div class="benchmark-modal__summary">
            <div class="benchmark-modal__metric">Min FPS: <span id="benchmarkMinFps">--</span></div>
            <div class="benchmark-modal__metric">Max FPS: <span id="benchmarkMaxFps">--</span></div>
            <div class="benchmark-modal__metric">Avg FPS: <span id="benchmarkAvgFps">--</span></div>
            <div class="benchmark-modal__metric">Duration: <span id="benchmarkDuration">--</span></div>
          </div>
          <canvas id="benchmarkChart" width="480" height="240" aria-label="Benchmark FPS chart"></canvas>
        </div>
      </div>
      <div class="benchmark-modal__footer">
        <button id="benchmarkRunAgainBtn" class="benchmark-modal__button">Run Again</button>
        <button id="benchmarkModalCloseFooterBtn"
          class="benchmark-modal__button benchmark-modal__button--primary">Close</button>
      </div>
    </div>
  </div>

  <script src="/src/main.js" type="module"></script>
  <script type="module">
    import { UNIT_COSTS } from '/src/config.js'
    import { buildingData } from '/src/buildings.js'

    document.addEventListener('DOMContentLoaded', () => {
      // Update unit costs
      Object.entries(UNIT_COSTS).forEach(([type, cost]) => {
        const btn = document.querySelector(`.production-button[data-unit-type="${type}"]`)
        if (btn) {
          const costSpan = btn.querySelector('.unit-cost')
          if (costSpan) costSpan.textContent = `$${cost}`
        }
      })

      // Update building costs and power
      Object.entries(buildingData).forEach(([type, data]) => {
        const btn = document.querySelector(`.production-button[data-building-type="${type}"]`)
        if (btn) {
          const costSpan = btn.querySelector('.building-cost')
          if (costSpan) costSpan.textContent = `$${data.cost}`

          const powerSpan = btn.querySelector('.building-power')
          if (powerSpan) {
            const val = data.power
            powerSpan.textContent = `${val > 0 ? '+' : ''}${val} MW`
          }
        }
      })
    })
  </script>
  <script>
    // Add this to ensure we have sound functions even if not defined elsewhere
    function playSound(soundName) {
      if (typeof sounds !== 'undefined' && sounds[soundName]) {
        const sound = sounds[soundName]
        sound.currentTime = 0
        sound.play().catch(e => window.logger('Error playing sound:', e))
      }
    }
  </script>

  <div id="mobileSidebarModal" class="mobile-sidebar-modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="mobile-sidebar-modal__backdrop" data-modal-dismiss="true"></div>
    <div class="mobile-sidebar-modal__dialog" role="document">
      <header class="mobile-sidebar-modal__header">
        <h2 class="mobile-sidebar-modal__title">Menu</h2>
        <button id="mobileSidebarModalClose" class="mobile-sidebar-modal__close" type="button" title="Close menu"
          data-modal-dismiss="true">
          ‚úï
        </button>
      </header>
      <div id="mobileSidebarModalContent" class="mobile-sidebar-modal__content"></div>
    </div>
  </div>
  <div id="userDocsModal" class="user-docs-modal hidden" aria-hidden="true">
    <div class="user-docs-modal__dialog" role="dialog" aria-modal="true" aria-labelledby="userDocsTitle">
      <div class="user-docs-modal__header">
        <h2 id="userDocsTitle">Code for Battle ‚Äî User Documentation</h2>
        <button id="userDocsCloseBtn" class="user-docs-modal__close" type="button" aria-label="Close documentation">√ó</button>
      </div>
      <iframe id="userDocsFrame" class="user-docs-modal__frame" title="User documentation" loading="lazy"></iframe>
    </div>
  </div>

</body>

</html>
